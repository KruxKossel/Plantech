@model IEnumerable<Plantech.DTOs.ClienteDTO>

@{
    ViewData["Title"] = "Index";
}
<br>
<h2>Consultar Clientes</h2>
@* <form method="get" asp-action="Index">
    <div class="form-row" style="display: flex;">
        <div class="col-md-6">
            <input type="text" name="filtro" class="form-control" placeholder="Filtrar por nome ou descrição"
                value="@ViewData["FiltroAtual"]" />
        </div>
        <div class="" style="display: flex;margin-bottom: 20px;">
            <button type="submit" class="btn btn-primary" style="margin-left: 15px;">Filtar</button>
            <a asp-action="ExportarExcel" asp-route-filtro="@ViewData["FiltroAtual"]" class="btn btn-success"
                style="margin-left: 15px;">Exportar para Excel</a>
            <a asp-action="RelatorioImpressao" asp-route-filtro="@ViewData["FiltroAtual"]" target="_blank"
                class="btn btn-success" style="margin-left: 15px;">Visualizar Relatório</a>
        </div>
    </div>
</form> *@
@if (User.IsInRole("Vendedor") || User.IsInRole("Administrador"))
{
<div class="card-index">
    <div style="max-height: 350px; overflow-y: auto;">
        <table class="table table-striped table-hover">
            <thead>
                <tr>

                    <th>CNPJ</th>
                    <th>Razão Social</th>
                    <th>Endereço</th>
                    <th>Telefone</th>
                    <th>Email</th>
                    <th>Status</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Cnpj)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.RazaoSocial)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Endereco)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Telefone)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Email)
                        </td>
                        @if (item.Status == "ativo")
                        {
                            <td style="color: rgb(0, 139, 69);!important">
                                @Html.DisplayFor(modelItem => item.Status)
                            </td>
                        }
                        else
                        {
                            <td style="color: rgb(139, 0, 0);!important">
                                @Html.DisplayFor(modelItem => item.Status)
                            </td>
                        }
                        <td>
                            <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-primary">Editar</a>
                            <a asp-action="Details" asp-route-id="@item.Id" class="btn btn-primary">Detalhes</a>
                            <form asp-action="Delete" asp-route-id="@item.Id" method="post" style="display:inline;">
                                <button type="submit" class="btn btn-warning">Mudar Status</button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        <div class="text-end" style="margin-right: 15px;">
            <br>
            <a asp-action="Create" class="btn btn-primary">Adicionar Cliente</a><br><br>
        </div>

    </div>
</div>
<br>
<div>
    <a asp-controller="Vendedor" asp-action="Index" class="btn btn-primary">Voltar a Home</a>
</div>
}